-#  Copyright (C) 2013, 2014 Dr. Thomas Schank  (DrTom@schank.ch, Thomas.Schank@algocon.ch)
-#  Licensed under the terms of the GNU Affero General Public License v3.
-#  See the LICENSE.txt file provided with this software.

- commit ||= commit || nil
- level = branch.current_commit.depth - commit.depth if commit
%li.branch-link
  %span.nowrap<>
    = link_to(workspace_commits_path(repository: {name: branch.repository.name}, 
      branch: {name: branch.name}), data: {toggle: 'tooltip', title: "Show commits in the branch \"#{branch.name}\"."}, 
      class: "show-tooltip") do
      -if commit and  branch.current_commit_id == commit.id
        %b<> #{branch}
      -else
        = branch
    %sub<>
      -if commit and  branch.current_commit_id == commit.id
        %i.icon-branch-head<>
      -else
        #{level}

